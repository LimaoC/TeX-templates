% ---------- Packages ---------- %
% Math symbols
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{centernot}
\usepackage{mathtools}
\usepackage{physics}

% Header and page setup
\usepackage{fancyhdr}
\usepackage[top=3cm, bottom=3cm, left=1.5cm, right=1.5cm]{geometry}
\usepackage{titling}
\usepackage{titlesec}

% Images and figures
\usepackage{graphicx}

% Macros
\usepackage{xstring}

% Environments
\usepackage{enumitem}


% ---------- Formatting ---------- %
% Center title
\renewcommand\maketitlehooka{\null\mbox{}\vfill}
\renewcommand\maketitlehookd{\vfill\null}

\setlength{\headheight}{15pt}

% Set \noindent for all paragraphs globally 
\setlength{\parindent}{0pt}

% Allow display breaks in display maths
\allowdisplaybreaks


% ---------- Custom commands ---------- %
% Utility
\newcommand{\Bracket@Util}[2]{
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    % Surrounds the contents of #2 with auto-sized brackets (type specified by
    % #1).
    \IfEqCase{#1}{
        {br}{\br{#2}}
        {sqbr}{\sqbr{#2}}
        {nobr}{#2}
    }[\PackageError{Bracket@Util}{Undefined option to Bracket@Util: #1}{}]
}

\newcommand{\SubSupPostExpr@Util}{}
\newcommand{\SubSup@Util}{
    % Recursively parses subscripts and superscripts for custom commands and
    % macros, after which \SubSupPostExpr@Util is executed (use \renewcommand
    % to change \SubSupPostExpr@Util before using \SubSup@Util).
    % Reference: https://tex.stackexchange.com/questions/334186/create-a-new-command-that-supports-superscript-and-subscript-syntax
    \@ifnextchar{_}{\Sub@Util}{
    \@ifnextchar{^}{\Sup@Util}{\SubSupPostExpr@Util}}
}
\newcommand{\Sub@Util}[2]{_{#2}\SubSup@Util}
\newcommand{\Sup@Util}[2]{^{#2}\SubSup@Util}

% Auto-sized bracketing
\DeclarePairedDelimiter\autobracket{(}{)}
\DeclarePairedDelimiter\autosquarebracket{[}{]}
\DeclarePairedDelimiter\autocurlybracket{\{}{\}}
\DeclarePairedDelimiter\automagnitude{|}{|}
\newcommand{\br}[1]{\autobracket*{#1}}
\newcommand{\sqbr}[1]{\autosquarebracket*{#1}}
\newcommand{\curbr}[1]{\autocurlybracket*{#1}}
\newcommand{\mgnt}[1]{\automagnitude*{#1}}

% Sets of numbers
\newcommand{\R}{\mathbb{R}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\Q}{\mathbb{Q}}

% Statistics
\newcommand{\Prob}[2][br]{ % Probability measure
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathbb{P}\SubSup@Util
}

\newcommand{\E}[2][br]{ % Expectation
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathbb{E}\SubSup@Util
}

\newcommand{\Var}[2][br]{ % Variance
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathbb{V}\text{ar}\SubSup@Util
}

\newcommand{\Cov}[2][br]{ % Covariance
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathbb{C}\text{ov}\SubSup@Util
}

\newcommand{\PGF}[2][br]{ % Probability Generating Function
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathcal{G}\SubSup@Util
}

\newcommand{\MGF}[2][br]{ % Moment Generating Function
    % #1: Bracket type - br (round), sqbr (square), nobr (none)
    % #2: Contents
    \renewcommand{\SubSupPostExpr@Util}{\Bracket@Util{#1}{#2}}
    \mathcal{M}\SubSup@Util
}

% Symbols
\newcommand{\eps}{\varepsilon}


% ---------- Questions ---------- %
\newcounter{questionCounter}
\newcounter{subquestionCounter}[questionCounter]

\providecommand{\question}{
    \stepcounter{questionCounter}
    \setcounter{subquestionCounter}{0}

    \noindent{\begin{minipage}{\linewidth}
        \vspace{5mm}
        \noindent{\bf Question \thequestionCounter.}
        \vspace{1mm}
        \hrule
        \vspace{3mm}
    \end{minipage}}
}

% Subquestions
\newenvironment{subquestions}{
    \begin{enumerate}
}{\end{enumerate}}

% Subquestion in roman format - (i), (ii), (iii), ...
\newcommand{\subquestionroman}{
    \stepcounter{subquestionCounter}
    \item[(\textbf{\roman{subquestionCounter}})]
}

% Subquestion in alphabetical format - (a), (b), (c), ...
\newcommand{\subquestionalph}{
    \stepcounter{subquestionCounter}
    \item[(\textbf{\alph{subquestionCounter}})]
}

% Subquestion in numerical format - (1), (2), (3), ...
\newcommand{\subquestionnum}{
    \stepcounter{subquestionCounter}
    \item[(\textbf{\arabic{subquestionCounter}})]
}
